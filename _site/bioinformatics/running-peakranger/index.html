<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
	<title>Running Peakranger Bcp • Generally Biology</title>
    <meta name="description" content="So, I was interestd in running the software peakranger bcp recently, but
stumbeled into a rather irritating probelm. I kept getting the classic message
Segmentation fault (core dumped). Upon looking around for the solution to
this problem I found nothing. So I thought I would document briefly what I did
to fix it.

">
    <meta name="keywords" content="">
    
    	<!-- Twitter Cards -->
	<meta name="twitter:title" content="Running Peakranger Bcp">
	<meta name="twitter:description" content="So, I was interestd in running the software peakranger bcp recently, but
stumbeled into a rather irritating probelm. I kept getting the classic message
Segmentation fault (core dumped). Upon looking around for the solution to
this problem I found nothing. So I thought I would document briefly what I did
to fix it.

">
	
	
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image" content="http://generallybiology.com//images/dnaimage.jpg">
	
	<!-- Open Graph -->
	<meta property="og:locale" content="">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Running Peakranger Bcp">
	<meta property="og:description" content="So, I was interestd in running the software peakranger bcp recently, but
stumbeled into a rather irritating probelm. I kept getting the classic message
Segmentation fault (core dumped). Upon looking around for the solution to
this problem I found nothing. So I thought I would document briefly what I did
to fix it.

">
	<meta property="og:url" content="http://generallybiology.com//bioinformatics/running-peakranger/">
	<meta property="og:site_name" content="Generally Biology">

    <link rel="canonical" href="http://generallybiology.com//bioinformatics/running-peakranger/">

    <link href="http://generallybiology.com//atom.xml" type="application/atom+xml" rel="alternate" title="Generally Biology Atom Feed">
    <link href="http://generallybiology.com//sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="cleartype" content="on">

    <link rel="stylesheet" href="http://generallybiology.com//css/main.css">
    <!-- HTML5 Shiv and Media Query Support for IE -->
    <!--[if lt IE 9]>
      <script src="http://generallybiology.com//js/vendor/html5shiv.min.js"></script>
      <script src="http://generallybiology.com//js/vendor/respond.min.js"></script>
    <![endif]-->

  </head>

  <body id="js-body">
    <!--[if lt IE 9]><div class="upgrade notice-warning"><strong>Your browser is quite old!</strong> Why not <a href="http://whatbrowser.org/">upgrade to a newer one</a> to better enjoy this site?</div><![endif]-->

    <header id="masthead">
  <div class="inner-wrap">
    <a href="http://generallybiology.com//" class="site-title">Generally Biology</a>
    <nav role="navigation" class="menu top-menu">
        <ul class="menu-item">
	<li class="home"><a href="/">Generally Biology</a></li>
	
    
    <li><a href="http://generallybiology.com//" >Home</a></li>
  
    
    <li><a href="http://generallybiology.com//blog/" >Blog</a></li>
  
    
    <li><a href="http://generallybiology.com//collections/" >Collections</a></li>
  
    
    <li><a href="http://generallybiology.com//about/" >About</a></li>
  
</ul>
    </nav>
  </div><!-- /.inner-wrap -->
</header><!-- /.masthead -->

    <nav role="navigation" id="js-menu" class="sliding-menu-content">
  <h5>Generally Biology <span></span></h5>
  <ul class="menu-item">
    <li>
      <a href="http://generallybiology.com//">
        
        <div class="title">Home</div>
        <p class="excerpt">Generally Biology</p>
      </a>
    </li><li>
      <a href="http://generallybiology.com//blog/">
        
        <div class="title">Blog</div>
        <p class="excerpt">My Writings on Biology, and computers, and the insane intersection between the two that we call bioinformatics/computational biology.</p>
      </a>
    </li><li>
      <a href="http://generallybiology.com//collections/">
        
        <div class="title">Collections</div>
        <p class="excerpt">Writings on specific subjects</p>
      </a>
    </li><li>
      <a href="http://generallybiology.com//about/">
        
        <div class="title">About</div>
        <p class="excerpt">John Pablo Mendieta</p>
      </a>
    </li>
  </ul>
</nav>
<button type="button" id="js-menu-trigger" class="sliding-menu-button lines-button x2" role="button" aria-label="Toggle Navigation">
  <span class="nav-lines"></span>
</button>

<div id="js-menu-screen" class="menu-screen"></div>


    <div id="page-wrapper">
      <div id="main" role="main">
	<article class="wrap" itemscope itemtype="http://schema.org/Article">
		
		
  <nav class="breadcrumbs">
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
      <a href="http://generallybiology.com/" itemprop="url">
        <span itemprop="title">Home</span>
      </a> › 
    <span itemscope itemtype="http://data-vocabulary.org/Breadcrumb">
      <a href="http://generallybiology.com//Bioinformatics/" itemprop="url">
        <span itemprop="title">Bioinformatics</span>
      </a>
    </span>
  </nav><!-- /.breadcrumbs -->

		<div class="page-title">
			<h1>Running Peakranger Bcp</h1>
		</div>
		<div class="inner-wrap">
			<div id="content" class="page-content" itemprop="articleBody">
				<p>So, I was interestd in running the software peakranger bcp recently, but
stumbeled into a rather irritating probelm. I kept getting the classic message
<code class="highlighter-rouge">Segmentation fault (core dumped)</code>. Upon looking around for the solution to
this problem I found nothing. So I thought I would document briefly what I did
to fix it.</p>

<h3 id="initial-output">Initial Output</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>program version:          1.18
Data files:
 File format:             bam
 Sample file:             chip_rep1_BWA.sorted.bam
 Control file:            input_rep1_BWA.sorted.bam
Qualities:
 P value cut off:         0.0001
 sliding window size:     500
 Read extension length:   200
Output:
 Regions:                 test_region.bed
 HTML reports:            Disabled(--report not specified)

Reads statistics:

 Treatment reads +:       12002431
 Treatment reads -:       11987889
 Average read length:     30
 Control reads +:         11301505
 Control reads -:         11298535
 Average read length:     30
 Verifying reads...
Warning: B73V4_ctg162 only contains reads in the positive strand. The chromosome is removed.
Warning: B73V4_ctg162 only contains reads in the positive strand. The chromosome is removed.

Reads statistics after correction:

 Treatment reads +:       12002424
 Treatment reads -:       11987889
 Control reads +:         11301503
 Control reads -:         11298535

 Calling peaks...

Segmentation fault (core dumped)
</code></pre>
</div>

<p>Upon investigating this further, I decided to see if the issue was coming from the scaffold reported in the error, B73V4_ctg162. To see check this I first analysed how many reads were aligning to this contig in the maize genome using  using a quick samtools command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#Command:
samtools idxstats chip_B73_ear_H3K36me3_rep1_bowtie2algn.sorted.bam | grep B73V4_ctg162

#Output:
B73V4_ctg162    40634   0       0
</code></pre>
</div>

<p>So, there were ZERO reads aligning to this contig. Making me think the software might be chocking on this scaffold. But after removing this scaffold from the SAM file, I was still being greated by <code class="highlighter-rouge">Segmentation fault (core dumped)</code> . So, in order to try again I took a more drastic measure removed all scaffolds that had CTG in them. I did this after checking the gff3 file for all scaffolds/contigs, and coming to the conclusion that none of them are particularly gene rich and/or interesting for my questions. I removed ALL of these scaffolds using the following command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>grep -v "B73V4_ctg*" chip_rep1_bowtie2algn.sam  &gt; chip_rep1_bowtie2algn.noctg_scaff.sam &amp;&amp; grep -v "B73V4_ctg*" chip_rep1_bowtie2algn.sam  &gt; chip_rep1_bowtie2algn.noctg_scaff.sam 
</code></pre>
</div>

<p>I eventuall re-ran this software using these generated SAM (I didn’t want to take the extra step of going from <code class="highlighter-rouge">samtools view | grep _v </code> back to sam) files, and was eventually rewarded with:</p>

<h3 id="final-output">Final output:</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>program version:          1.18
Data files:
 File format:             sam
 Sample file:             chip_rep1_bowtie2algn.noctg_scaff.sam
 Control file:            chip_input_rep1_bowtie2algn.noctg_scaff.sam
Qualities:
 P value cut off:         0.0001
 sliding window size:     500
 Read extension length:   200
Output:
 Regions:                 test_sam_no162_region.bed
 HTML reports:            Disabled(--report not specified)

Reads statistics:

 Treatment reads +:       20131985
 Treatment reads -:       20126418
 Average read length:     76
 Control reads +:         15762557
 Control reads -:         15771271
 Average read length:     76
 Verifying reads...

Reads statistics after correction:

 Treatment reads +:       20131985
 Treatment reads -:       20126418
 Control reads +:         15762557
 Control reads -:         15771271

 Calling peaks...

Discovered 2693 regions in 1.
Discovered 1222 regions in 10.
Discovered 2065 regions in 2.
Discovered 1902 regions in 3.
Discovered 1879 regions in 4.
Discovered 2085 regions in 5.
Discovered 1538 regions in 6.
Discovered 1445 regions in 7.
Discovered 1649 regions in 8.
Discovered 1396 regions in 9.
Discovered 3    regions in Mt.
Discovered 0    regions in Pt.



Total regions discovered:       17877
</code></pre>
</div>

<p>Success! It appears that those nasty scaffolds/contigs were proving to be quite troublesome for this software. But, this isn’t an ideal solution. We’re still casting out genomic information that I would prefer to keep for analysis. So… There has to be a smarter way of doing this. Maybe pin pointing the exact scaffolds that were failing and why? But in my case, this got me the desired results I needed.</p>


				<hr />
				<footer class="page-footer">
					

<div class="author-image">
	<img src="http://generallybiology.com//images/" alt="">
</div><!-- ./author-image -->
<div class="author-content">
	<h3 class="author-name" > <span itemprop="author"></span></h3>
	<p class="author-bio"></p>
</div><!-- ./author-content -->

					
					<div class="page-meta">
	<p> <time datetime="2018-01-19T10:00:00Z" itemprop="datePublished">January 19, 2018</time></p>
</div><!-- /.page-meta -->

				</footer><!-- /.footer -->
				<aside>
					<hr />
<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = '';

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

				</aside>
			</div><!-- /.content -->
		</div><!-- /.inner-wrap -->
		
	</article><!-- ./wrap -->
</div><!-- /#main -->

      <footer role="contentinfo" id="site-footer">
	<nav role="navigation" class="menu bottom-menu">
		<ul class="menu-item">
		
      
			<li><a href="http://generallybiology.com/" >Follow:</a></li>
		
      
			<li><a href="https://twitter.com/pabster212?lang=en" target="_blank">Twitter</a></li>
		
      
			<li><a href="https://github.com/Jome0169" target="_blank">Github</a></li>
		
      
			<li><a href="https://www.linkedin.com/in/john-mendieta-016305119/" target="_blank">Linkedin</a></li>
		
		</ul>
	</nav><!-- /.bottom-menu -->
	<p class="copyright">&#169; 2019 <a href="http://generallybiology.com/">Generally Biology</a> powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> + <a href="http://mmistakes.github.io/skinny-bones-jekyll/" rel="nofollow">Skinny Bones</a>.</p>
</footer>

    </div>

    <script src="http://generallybiology.com//js/vendor/jquery-1.9.1.min.js"></script>
    <script src="http://generallybiology.com//js/main.js"></script>

  </body>

</html>
